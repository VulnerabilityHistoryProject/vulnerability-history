require 'test_helper'

class TagTest < ActiveSupport::TestCase
  test 'overlaps' do
    #call overlaps method with set of shortnames that returns a set of tags
    
    overlapsResults = Tag.overlaps(['cooks', 'owners', 'refactors', 'reverts'])
    overlapsCVEResults = overlapsResults.map { |tag| tag['cve']}

    #validate sql statement used to generate results
    expected_results = "[\"CVE-2011-5904\",\"CVE-2011-3093\",\"CVE-2016-1676\",\"CVE-2013-2878\"]"
    assert_equal expected_results, overlapsCVEResults.to_json, 'SQL statement is not correct'
  end
end
