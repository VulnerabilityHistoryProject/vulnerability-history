require 'test_helper'
require 'taggers/util_tagger'

class UtilTagTest < ActiveSupport::TestCase

  test 'Util tags created' do
    t = UtilTagger.new
    t.create_tags
    assert_equal(1, Tag.where(shortname: 'util').size)
  end

  test 'Util tag not duplicated' do
    UtilTagger.new
    tag_count_before = Tag.all.size
    if Tag.exists?(shortname: 'util')
      tag_count_after = Tag.all.size
      assert_equal(tag_count_before, tag_count_after)
    end
  end

  test 'Util tag applied' do
    t = UtilTagger.new
    t.create_tags
    t.apply_tags
    tag = Tag.find_by(shortname: 'util')
    assert(tag)
  end

end