require 'test_helper'
require 'event_generators/vcc_events'

class VccEventsTest < ActiveSupport::TestCase

  test 'vcc events created for all vccs' do
    VccEvents.new.generate
    expected = [
      "Vulnerability-contributing commit for CVE-2011-3092: Remove empty unused directories from src/webkit.",
      "Vulnerability-contributing commit for CVE-2011-3092: WebKit merge 39606:39660 Review URL: http://codereview.chromium.org/17239",
      "Vulnerability-contributing commit for CVE-2013-2878: SimplifiedBackwardsTextIterator returns incorrect offset with first-letter rule"
    ]
    actual = Event.where(event_type: 'vcc').
                   map { |e| e.title }.sort
    assert_equal expected, actual
  end

end
