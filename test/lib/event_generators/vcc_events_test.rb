require 'test_helper'
require 'event_generators/vcc_events'

class VccEventsTest < ActiveSupport::TestCase

  test 'vcc events created for all vccs' do
    VccEvents.new.generate
    expected = [
      # dups since we already have them in the fixture
      "Vulnerability-contributing commit: Remove empty unused directories from src/webkit.",
      "Vulnerability-contributing commit: Remove empty unused directories from src/webkit.",
      "Vulnerability-contributing commit: SimplifiedBackwardsTextIterator returns incorrect offset with first-letter rule",
      "Vulnerability-contributing commit: SimplifiedBackwardsTextIterator returns incorrect offset with first-letter rule",
      "Vulnerability-contributing commit: WebKit merge 39606:39660 Review URL: http://codereview.chromium.org/17239",
      "Vulnerability-contributing commit: WebKit merge 39606:39660 Review URL: http://codereview.chromium.org/17239",
    ]
    actual = Event.where(detail_type: 'Vcc').
                   map { |e| e.title }.sort
    assert_equal expected, actual
  end

end
