require 'test_helper'
require 'event_generators/vcc_events'

class VccEventsTest < ActiveSupport::TestCase

  test 'vcc events created for all vccs' do
    event_count = Event.count
    VccEvents.new.generate
    expected = [
        "Edit: Vcc: Remove empty unused directories from src/webkit.",
        "Edit: Vcc: SimplifiedBackwardsTextIterator returns incorrect offset with first-letter rule", 
        "Edit: Vcc: WebKit merge 39606:39660 Review URL: http://codereview.chromium.org/17239"
    ]
    actual = Event.where(detail_type: 'Vcc').
                   where("title_template LIKE 'Edit: %'").
                   map { |e| e.title }.sort
    assert_equal expected, actual
  end

end
