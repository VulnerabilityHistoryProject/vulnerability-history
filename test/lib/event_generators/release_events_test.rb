require 'test_helper'
require 'event_generators/release_events'
require 'writing'

class ReleaseEventsTest < ActiveSupport::TestCase

  setup do
    p = projects(:one)
    ReleaseEvents.new(p).generate
  end

  test 'release title created for releases' do
    expected = [
      "v1.7 Major release",
      "v1.9 Major release",
    ]
    actual = Release.where("name LIKE 'v1.% Major release'").
                   map { |e| e.name }.sort
    assert_equal expected, actual
  end

end
