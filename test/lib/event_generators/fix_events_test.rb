require 'test_helper'
require 'event_generators/fix_events'

class FixEventsTest < ActiveSupport::TestCase

  test 'commit events created for all vulns' do
    event_count = Event.count
    FixEvents.new.generate
    expected = []
    actual = Event.where(detail_type: 'Fix').
                   where("title_template LIKE 'Fix: %'").
                   map { |e| e.title }.sort
    assert_equal expected, actual
  end

end
