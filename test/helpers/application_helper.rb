require 'test_helper'
require 'coderay'
require 'yaml'
require 'kramdown'
require 'rinku'
require 'sanitize'

class ApplicationHelperTest < ActionView::TestCase

  test 'markdown1' do
    assert_equal "<p><strong>Bolded</strong></p>\n", markdown("**Bolded**")
  end

  test 'markdown2' do
    assert_equal "<p><a href=\"https://www.google.com\">Click Here</a></p>\n",
      markdown("[Click Here](https://www.google.com)")
  end

  test 'remove_html' do
    assert_equal "<p>Bold</p>\n", markdown("<b>Bold</b>")
  end

  test 'remove_script_tag' do
    assert_equal "<p>alert(1);</p>\n", markdown("<script>alert(1);</script>")
  end

  test 'auto_link' do
    assert_equal "<p><a href=\"https://www.google.com\">https://www.google.com</a></p>\n",
      markdown("https://www.google.com")
  end

  test 'auto_link2' do
    assert_equal "<p><a href=\"https://www.google.com\">https://www.google.com</a></p>\n",
      markdown("<a href=\"https://www.google.com\">https://www.google.com</a>")
  end

  test 'everything' do
    assert_equal "<p>Hello <em>World</em> <a href=\"https://www.example.com\">https://www.example.com</a></p>\n",
      markdown("<i>Hello</i> *World* https://www.example.com")
  end

end
