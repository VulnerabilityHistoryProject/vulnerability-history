require "application_system_test_case"

class NavbarTest < ApplicationSystemTestCase
  setup do
    Capybara.app_host = "https://alpha.vulnerabilityhistory.org"
    Capybara.run_server = false

    @developers = '/developers'
    Rails.cache.clear
  end

  test 'check for "Developers" title' do
    visit @developers
    gc = find('.grid-container')

    assert gc.text.include? 'Developers'
  end

  test 'dev table shows 10 results' do
    visit @developers
    table_body = find('tbody')

    assert_equal 10, table_body.all('tr').length
  end

  test 'individual developer' do
    visit @developers
    visit current_url << '/1'
    gc = find('.grid-container')
    assert gc.text.include? "Developer's Email Address:"
  end
end

