require "application_system_test_case"

class ContentTest < ApplicationSystemTestCase
  setup do
    Capybara.app_host = "https://alpha.vulnerabilityhistory.org"
    Capybara.run_server = false

    @api = '/api'
    Rails.cache.clear
  end

  test 'check title' do
    visit @api
    gc = find('.grid-container')

    assert gc.text.include? 'Vulnerability History Project RESTful API'
  end

  test 'check endpoints' do
    visit @api
    gc = find('.grid-container')

    assert gc.text.include? 'vulnerabilities'
    assert gc.text.include? 'commits'
    assert gc.text.include? 'developers'
    assert gc.text.include? 'filepaths'
    assert gc.text.include? 'tags'
    assert gc.text.include? 'projects'
  end
end