require "application_system_test_case"

class ContentTest < ApplicationSystemTestCase
  setup do
    Capybara.app_host = "https://alpha.vulnerabilityhistory.org"
    Capybara.run_server = false

    @start = '/'
    Rails.cache.clear
  end

  test 'homepage title and subtitle' do
    visit @start
    gc = find('.grid-container')
    title_sub = gc.all('.welcome')
    title_sub_num = 1
    title_sub.each { |section|
      cell = section.find('.cell')
      case title_sub_num
      when 1
        cell.assert_selector('h1', text: 'The Vulnerability History Project')
      when 2
        subtitle = cell.all('p')
        assert_equal('A museum of mistakes', subtitle[0].text)
        assert_equal('to help us engineer secure software.', subtitle[1].text)
      end
      title_sub_num += 1
    }
  end  
end
