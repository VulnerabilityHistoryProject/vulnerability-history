# Draw the routes from URL to Controllers
Rails.application.routes.draw do
  root controller: :welcome, action: :index

  get '/vulnerabilities',         controller: :vulnerabilities, action: :index
  get '/vulnerabilities/:id',     controller: :vulnerabilities, action: :show, constraints: { id: /CVE\-\d+\-\d+/ }
  get '/:id',                     controller: :vulnerabilities, action: :show, constraints: { id: /CVE\-\d+\-\d+/ }
  get "/api/:id",                 controller: :vulnerabilities, action: :show, constraints: { id: /CVE\-\d+\-\d+/ }
  get '/api/vulnerabilities',     controller: :vulnerabilities, action: :index
  get '/api/vulnerabilities/:id', controller: :vulnerabilities, action: :show, constraints: { id: /CVE\-\d+\-\d+/ }
  get '/corpus',                  controller: :vulnerabilities, action: :corpus
  get '/api/vulnerabilities/:id/events', controller: :vulnerabilities, action: :events, constraints: { id: /CVE\-\d+\-\d+/ }

  get '/developers',                 controller: :developers, action: :index
  get '/developers/:id',             controller: :developers, action: :show
  get '/api/developers',             controller: :developers, action: :index
  get '/api/developers/:id',         controller: :developers, action: :show
  get '/api/developers/:id/commits', controller: :developers, action: :commits

  get '/commits',                   controller: :commits, action: :index
  get '/commits/:id',               controller: :commits, action: :show
  get '/api/commits',               controller: :commits, action: :index
  get '/api/commits/:id',           controller: :commits, action: :show
  get '/api/commits/:id/developer', controller: :commits, action: :developer

  get '/tags',         controller: :tags, action: :index
  get '/tags/:id',     controller: :tags, action: :show
  get '/api/tags/overlaps', controller: :tags, action: :overlaps
  get '/api/tags',     controller: :tags, action: :index
  get '/api/tags/:id', controller: :tags, action: :show

  get '/articles',     controller: :articles, action: :index
  get '/articles/:id', controller: :articles, action: :show
  get '/api/articles',     controller: :articles, action: :index
  get '/api/articles/:id', controller: :articles, action: :show

  get '/projects',                            controller: :projects, action: :index
  get '/api/projects',                        controller: :projects, action: :index
  get '/api/projects/:project_slug/fixes',    controller: :projects, action: :fixes
  get '/api/projects/:project_slug/releases', controller: :projects, action: :releases

  get '/filepaths',                                  controller: :filepaths, action: :index
  get '/filepaths/:filepath_id',                     controller: :filepaths, action: :show
  get '/api/filepaths',                              controller: :filepaths, action: :index
  get '/api/filepaths/:filepath_id',                 controller: :filepaths, action: :show
  get '/api/filepaths/:filepath_id/developers',      controller: :filepaths, action: :developers
  get '/api/filepaths/:filepath_id/commits',         controller: :filepaths, action: :commits
  get '/api/filepaths/:filepath_id/contributors',    controller: :filepaths, action: :contributors
  get '/api/filepaths/:filepath_id/vulnerabilities', controller: :filepaths, action: :vulnerabilities

  get '/insights/tag-trends', controller: :insights, action: :tag_trends
  get 'api/insights/tag-trends', controller: :insights, action: :tag_trends_api

  get '/curate', controller: :curate, action: :index

  get '/about',       controller: :about, action: :index
  get '/sitemap',     controller: :about, action: :sitemap
  get '/api',         controller: :about, action: :api
  get "/version",     controller: :about, action: :version
  get "/api/version", controller: :about, action: :version

  get '/news',   controller: :news, action: :index

  get '/status', controller: :status, action: :index

  get '/curationwizard',     controller: :curationwizard, action: :index
  get '/api/curationwizard', controller: :curationwizard, action: :questions
  get '/api/curationwizard', controller: :curationwizard, action: :template

end
