Rails.application.routes.draw do

  root 'welcome#index'

  resources :vulnerabilities, only: [:index, :show], format: false
  resources :cves, param: :name, only: [:index, :show], format: false
  resources :developers, only: [:index, :show], format: false
  resources :commits, only: [:index, :show], format: false
  resources :releases, only: [:index, :show], format: false
  resources :tags, only: [:index, :show], format: false
  resources :fixes, only: [:show], format: false
  resources :vccs , only: [:show], format: false
  resources :articles, only: [:show, :index], format: false

  get 'filepaths',       to: 'filepaths#index', format: false
  get 'filepaths/:id', to: 'filepaths#show', format: false

  scope :api do
    get 'filepaths',   to: 'filepaths#index', format: false
    get 'filepaths/:id/developers',      to: 'filepaths#developers', format: false
    get 'filepaths/:id/contributors',    to: 'filepaths#contributors', format: false
    get 'filepaths/:id/commits',         to: 'filepaths#commits', format: false
    get 'filepaths/:id/vulnerabilities', to: 'filepaths#vulnerabilities', format: false
  end

  get :curate, to: 'curate#index'

  scope :api do
    resources :vulnerabilities, only: [:index, :show], :format => false do
      get :events
    end
    resources :cves, only: [:index, :show], :format => false do

    end
    resources :commits, only: [:index, :show], :format => false do
      get :developer
    end
    resources :developers, only: [:index, :show], :format => false do
      get :commits
    end
    resources :releases, only: [:index, :show], :format => false



    resources :tags, only: [:index, :show], :format => false

    resources :articles, only: [:index, :show], :format => false
  end

end
