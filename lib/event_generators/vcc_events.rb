class VccEvents

  def generate
    Vcc.all.each do |vcc|
      e = Event.create!(
        detail: vcc,
        style: style,
        title_template: ':title:',
        type_template: 'vcc',
        description_template:
          File.read(File.expand_path("../markdown/vcc.md", __FILE__))
      )
      vcc.vulnerability.events << e
      vcc.vulnerability.save
    end
  end

  def style
    @style ||= Style.find_or_create_by!(
      name: 'vcc',
      icon: 'report_problem',
      color: '#ED6049',
    )
  end
end
