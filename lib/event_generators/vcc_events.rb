class VccEvents

  def generate
    Vcc.distinct.each do |vcc|
      # unless already_exists?(vcc)
        Event.create(
          detail: vcc,
          title_template: 'Edit: :title:',
          description_template: <<-EOS
            Vulnerable code was edited. Here was the commit message.

            :description:
          EOS
        )
      # end
    end
  end

  def already_exists?(vcc)
     Commit.where(vcc: vcc).exists?
  end
end