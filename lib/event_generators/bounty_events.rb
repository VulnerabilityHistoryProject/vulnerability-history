class BountyEvents
  def generate
    Vulnerability.all.each do |vulnerability|
        Event.create!(
          detail: vulnerability,
          style: style,
          title_template: 'Bounty awarded for :title:',
          type_template: 'bounty',
          description_template: <<-EOS
            A bounty of :notes~bounty: was awarded by the Chromium team
          EOS
        )
    end
  end

  private

  def style
    @style ||= Style.find_or_create_by!(
      name: 'bounty',
      icon: 'monetization_on',
      color: '#1FA31D'
    )
  end

end
