class ReleaseEvents
  def generate
    Release.all.each do |release|
      e = Event.create!(
        detail: release,
        style: style,
        title_template: ':title:',
        description_template:
          File.read(File.expand_path("../markdown/release.md", __FILE__,))
      )
      Vulnerability.all.each { |v| v.events << e }
    end
  end

  def style
    @style ||= Style.find_or_create_by!(
      name: 'release',
      icon: 'stars',
      color: '#D270CA',
    )
  end
end
