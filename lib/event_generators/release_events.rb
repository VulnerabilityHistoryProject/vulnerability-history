require_relative '../../app/helpers/application_helper'

class ReleaseEvents
  include ApplicationHelper

  def initialize(project)
    @project = project
    @desc = Writing.event_article('release')
    @style ||= Style.find_or_create_by!(
      name: 'release',
      icon: 'stars',
      color: '#D57BCE'
    )
  end

  def generate
    Release.all.each do |release|
      events << Event.create!(
        style: style,
        title: ':title:',
        event_type: 'release',
        date: release.date_released,
        description: Writing.event_article('release'),
        notes: "null",
        start_hidden: false
      )
    end
  end
end
