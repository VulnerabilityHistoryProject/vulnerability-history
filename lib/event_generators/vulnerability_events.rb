class VulnerabilityEvents

  def generate
    Vulnerability.where(project: @project).each do |v|
        e = Event.create!(
          style: style,
          date: v.announced,
          event_type: 'announced',
          title: "Vulnerability Announced for #{v.cve}",
          description: "The vulnerability was officially announced by the development team."
        )
        v.events << e
        v.save
    end
  end

  def style
    @style ||= Style.find_or_create_by!(
      name: 'announced',
      icon: 'bug_report',
      color: '#9DD5D5',
    )
  end

end
