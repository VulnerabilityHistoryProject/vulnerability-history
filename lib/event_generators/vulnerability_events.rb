class VulnerabilityEvents

  def generate
    Vulnerability.all.each do |vulnerability|
        e = Event.create!(
          detail: vulnerability,
          style: style,
          title_template: 'Vulnerability Announced for :title:',
          description_template: ':description:'
        )
        vulnerability.events << e
        vulnerability.save
    end
  end

  def style
    @style ||= Style.find_or_create_by!(
      name: 'vulnerability',
      icon: 'bug_report',
      color: '#F3A23A',
    )
  end

end
