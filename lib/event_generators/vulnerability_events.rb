class VulnerabilityEvents

  def generate
    Vulnerability.distinct.each do |vulnerability|
        Event.create!(
          detail: vulnerability,
          style: style,
          title_template: 'Vulnerability Announced for :title:',
          description_template: <<-EOS
            :description:
          EOS
        )
    end
  end

  def style
    @style ||= Style.find_or_create_by!(
      name: 'vulnerability',
      icon: 'bug_report',
      color: '#F3A23A',
    )
  end

end
