require_relative 'base_loader'

class ReleaseLoader extend BaseLoader
  def load_data(repo_path)
    return
  end
  def load_data_BACKUP(repo_path)
    Dir["#{repo_path}/releases/*.yml"].each do |file|
      File.write(file, BaseLoader.escape_html(File.open(file, &:read)))
      yml = File.open(file) { |f| YAML.load(f) }
      yml.each do | release_name, notes |
        notes['date']&.each do |date, name|
          Release.create!(
            name: "#{release_name.to_s} #{name}",
            date_released: date,
            notes: notes,
          )
        end
      end
    end
  end
end
