desc 'Generate tons of synthetic data'
namespace 'data' do
  task :synthetic => :environment do
    # EventStyle.create(event_type: 'vulnerability', color: '#ED6049', icon: '')
    # EventStyle.create(event_type: 'fix', color: '#6FD56E', icon: '')
    # EventStyle.create(event_type: 'vcc', color: '#F3A23A', icon: '')
    # EventStyle.create(event_type: 'release', color: '#D270CA', icon: '')
    # EventStyle.create(event_type: 'commit_filepath', color: '#6AA5E5', icon: '')

    notes = {
      bounty_title: 'Bounty awarded',
      bounty: 21337.0,
      bounty_announced: '1984-05-19',
    }

    prng = Random.new(1234)
    100.times do |i|
      notes["something_#{i}"] = prng.rand(32.years).seconds.ago
    end

    v = Vulnerability.create(cve: 'CVE-1984-0519',
                             announced: '2013-03-02'.to_datetime,
                             notes: notes)

    Event.create(detail: v,
      type_template: 'bounty',
      notes_query_title: 'bounty_title',
      notes_query_description: 'bounty',
      notes_query_date: 'bounty_announced',
      )

    100.times do | i |
      Event.create(detail: v,
        title_template: "The #{i.ordinalize} event for :title:",
        description_template: 'This is a description of :title:.',
        notes_query_date: "something_#{i}"
      )
    end

  end
end
