require_relative '../writing'
class I18nTagger

  def initialize
  end

  def create_tags
    @i18n_tag = Tag.find_or_create_by!(
      name: 'i18n',
      shortname: 'i18n',
      color: '#f5883d',
      icon: 'i18n',
      description: 'Was the feature impacted by this vulnerability about internationalization (i18n)?',
      family: 'i18n'
    )
  end

  def apply_tags
    Vulnerability.all.each do |v|
      if v.notes.dig('i18n','answer') == true
        VulnerabilityTag.create!(
          vulnerability: v,
          tag: @i18n_tag,
          note: 'true'
        )
      end
    end
  end
end
