require_relative '../writing'
class i18nTagger

  def initialize(project)
    @project = project
  end

  def create_tags
    @i18n_tag = Tag.find_or_create_by!(
      name: 'i18n',
      shortname: 'i18n',
      color: '#dbe045',
      description: Writing.tag_article('i18n')
    )
  end

  def apply_tags
    Vulnerability.where(project: @project).each do |v|
        if v.notes.dig('i18n') != nil
            v.notes.dig('i18n').each do |field|
                if field['answer'] == true
                    VulnerabilityTag.create!(
                        vulnerability: v,
                        tag: @i18n_tag,
                        note: ''
                        )
                end
            end
        end
    end
end
