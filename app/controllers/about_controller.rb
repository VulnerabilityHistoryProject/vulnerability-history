class AboutController < ApplicationController

  # GET /about
  def index
  end

  # GET /about/api
  def api
  end

  #GET /about/version (check with andy)
  def version 
    vers = VhpMetadata.find_by key: 'data version' #gets the version metadata from VHP Metadata 
    # an example in pair with version.html.erb @hello="hello" # @ is an attribute -> specific 
    @version = vers.value 

    render_json_for_api @version
  end
  # GET /sitemap
  # GET /sitemap.xml
  def sitemap
    @main_pages = %w(
      vulnerabilities
      tags
      articles
      filepaths
      projects
    )
    @todays_date = Date.today.iso8601
    @cves = Vulnerability.all.pluck(:cve)
    @tags = Tag.all.pluck(:shortname)
    @commits = Commit.all.pluck(:commit_hash)
    # For now, we don't need to do Filepaths, because:
    # (1) it makes sitemap HUGE
    # (2) people probably won't look for our slugified filename anyway
    # @filepaths = Filepath.all.pluck(:slug)
  end

end
