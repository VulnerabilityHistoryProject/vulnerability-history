class ApplicationController < ActionController::Base
  protect_from_forgery with: :exception
  before_action :set_project

  def render_json_for_api(obj)
    if request.path.starts_with? '/api'
      json = Rails.cache.fetch(request.path, expires_in: 12.hours) do
        Oj.dump obj, mode: :rails
      end
      render json: json
    end
  end

  # TODO: when we move to multi-project, this will be dynamic
  def set_project
    @project ||= Project.find_by(name: 'Chromium')
  end
end
