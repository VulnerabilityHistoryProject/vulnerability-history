import $ from 'jquery'
import { articleListingOneSize } from 'global/articleListing'

function load_succeded(data) {
  $('#loading').hide();

  var cves = [];
  var all;
  var filepaths = [];

  all = data;
  for (var i = 0; i < data.length; i++) {
    if(data[i]["filepaths"].length != 0){
      filepaths.push(data[i]);
    }
    if(data[i]["cves"].length != 0 && data[i]["cves"][0] != null){
      cves.push(data[i]);
    }
  }

  articleListingOneSize(all, '#article-listing-same')
  articleListingOneSize(filepaths, '#article-listing-files');
  articleListingOneSize(cves, '#article-listing-cves');
}

function load_failed(data) {
  $('#loading').hide();
  $('#loading-failed').show();
}

$( document ).ready( function() {
  $.ajax({
    url: "/api/articles",
    dataType: 'json',
  }).then(load_succeded, load_failed)});
