import dayjs from 'dayjs'

// // Helps Parse Strings
// var customParseFormat = require('dayjs/plugin/customParseFormat');
// dayjs.extend(customParseFormat);

// Necessary for 'Do' String Format
var advancedFormat = require('dayjs/plugin/advancedFormat');
dayjs.extend(advancedFormat);

// Necessary to get the Week of the Year
var weekOfYear = require('dayjs/plugin/weekOfYear');
dayjs.extend(weekOfYear);

// Necessary for IsSameOrAfter
var isSameOrAfter = require('dayjs/plugin/isSameOrAfter');
dayjs.extend(isSameOrAfter);

export default class SimpleDate {

  constructor(data) {
    this.date = dayjs(data);
  }

  // ------------------------
  // Used Date Formats in VHP
  // ------------------------

  shortYearFirstDate() {
    return this.date.format('YYYY-MM-DD');
  }

  shortMonthFirstDate() {
    return this.date.format("MM/DD/YYYY");
  }

  longPlainDate() {
    return this.date.format('MMMM DD, YYYY');
  }

  longOrdinalDateTime() {
    return this.date.format('MMMM Do YYYY, h:mm a');
  }

  longOrdinalDate() {
    return this.date.format('MMMM Do, YYYY');
  }
  
  // ---------------
  // Wrapper Methods
  // ---------------

  getWeekOfYear() {
    return this.date.week();
  }

  getDayOfMonth() {
    return this.date.date();
  }

  getYear() {
    return this.date.year();
  }

  getLastDayOfMonth() {
    return this.date.daysInMonth();
  }

  setMonth(num) {
    this.date = this.date.month(num);
    return this;
  }

  setDayOfMonth(num) {
    this.date = this.date.date(num);
    return this;
  }

  setDayOfWeek(num) {
    this.date = this.date.day(num);
    return this;
  }
 
  isDateSameOrAfter(simple_date) {
    if(simple_date instanceof SimpleDate) {
      return this.date.isSameOrAfter(simple_date.date);
    }
  }

  getLargerDate(simple_date) {
    return this.date.isAfter(simple_date.date) ? this : simple_date; 
  }

  getSmallerDate(simple_date) {
    return this.date.isBefore(simple_date.date) ? this : simple_date; 
  }

  addDays(number) {
    this.date = this.date.add(number, 'days');
    return this;
  }

  getJSDate() {
    return this.date.toDate();
  }

  clone() {
    var x = new SimpleDate();
    x.date = this.date.clone();
    return x;
  }
}
