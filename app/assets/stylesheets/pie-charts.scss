@import 'foundation_config/settings';

// Adapted from: https://www.freecodecamp.org/news/css-only-pie-chart/
@property --p{
	syntax: '<number>';
	inherits: true;
	initial-value: 0;
}

@keyframes p {
	from{--p:0}
}

.pie {
	--p: 0;
	--b: 0.75em;
	--c: #30D7A1;
	--w: 5em;

	width: var(--w);
	aspect-ratio: 1;

	position: relative;
	display: inline-grid;
	place-content: center;
	margin: 0.5em;
	font-size: 1.5em;
	font-weight: $global-weight-bold;
	font-family: $body-font-family;
	animation: p 1s .5s both;

	&:before, &:after {
	  content:"";
	  position: absolute;
	  border-radius: 50%;
	}

	&:before {
		inset:0;
		background:
			radial-gradient(farthest-side,var(--c) 98%,#0000) top/var(--b) var(--b) no-repeat,
			conic-gradient(var(--c) calc(var(--p)*1%),#0000 0);
		-webkit-mask:
			radial-gradient(farthest-side,#0000 calc(99% - var(--b)),#000 calc(100% - var(--b)));
			mask:radial-gradient(farthest-side,#0000 calc(99% - var(--b)),#000 calc(100% - var(--b)));
	}
	&:after {
		inset:calc(50% - var(--b)/2);
		background:var(--c);
		transform:rotate(calc(var(--p)*3.6deg)) translateY(calc(50% - var(--w)/2));
	}
}
