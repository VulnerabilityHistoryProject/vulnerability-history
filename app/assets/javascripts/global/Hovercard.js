import $ from 'jquery';

/**
 * Set a hovercard to load and present the selected vulnerability.
 * @param {*} elementSelect The class name of the elements that will have a hovercard.
 */
export default function setHovercard(elementSelect) {

    // Add hovercard div to elements with the given selector
    $(elementSelect).append('<div class="hover-card"></div>')

    // Initiate the hovercard element style and hide it
    $('.hover-card').css({
        display: 'inline-flex',
        position: 'absolute',
        backgroundColor: '#23232c',
        borderRadius: '17pt',
        borderLeft: '4pt solid #98e3b7',
        padding: '0.8em',
        height: '12em',
        width: '13em',
        color: '#98e3b7'
    }).hide()

    // Show the hovercard when hovering over the given elements and hide it when
    // hovering off it and the hovercard
    $(elementSelect).hover(function (e) { // when hovering over the link
            $(this)
                .find('.hover-card').css({ // spawn the hovercard centered at the cursor right below the chosen element
                left: e.pageX - $(this).find('.hover-card').width() / 2, // center with the cursor
                top: $(this)[0].getBoundingClientRect().bottom + window.pageYOffset - 3 // right below the element
            })
                .fadeIn(100)
        },
        function () { // when hovering off the link
            $(this).find('.hover-card').fadeOut(100)
        }
    )
}