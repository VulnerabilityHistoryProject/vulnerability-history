$( document ).ready( function() {
  $.ajax({
    url: "/api/filepaths/" + window.location.pathname.split("/").pop() + "/contributors",
    dataType: 'json',
    success: function(data) {
      console.log(data);
      var width = 960,
          height = 700,
          radius = Math.min(width, height) / 2;
      var svg = d3.select("#dev-pie")
                  .append("svg:svg")
                    .attr("width", width)
                    .attr("height", height)
                  .append("g")
                     .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")");

      var color = d3.scaleOrdinal(d3.schemeCategory20);

      const pie = d3.pie()
                    .value(d => d.num_commits)
                    .sort(null);

      const arc = d3.arc()
                    .innerRadius(0)
                    .outerRadius(radius);

      var path = svg.selectAll('path')
                    .data(pie(data));

      path.enter()
          .append('path')
          .attr('d', arc)
          .attr('fill', (d, i) => color(i))
          .attr('stroke', '#fff')
          .attr('stroke-width', '5px')
          ;

      }
  });
});
