/**
 * bind event listeners to the filters
 */
function bindDataToggleCallback(h, sEvents, cLowerLim, cUpperLim, minChicHeight, maxChicHeight, chicWidth, zoom,
                                minDate, maxDate, eVcc, eVuln, lFix, height, width, margin) {
    $(document).on("change", ".data-toggles", function () {
        var zoom;
        if ($('#zoom-bool').val() == "true") {
            zoom = true;
        } else {
            zoom = false;
        }
        h = {};
        h = new HorizontalTimeline(
            sEvents,
            cLowerLim,
            cUpperLim,
            minChicHeight,
            maxChicHeight,
            chicWidth,
            zoom,
            minDate,
            maxDate,
            eVcc,
            eVuln,
            lFix,
            height,
            width,
            margin,
            []
        );
        h.setup();
        h.generate();
    });
}

/**
 * bind event listeners to '#cd-timeline'
 */
function bindCdTimelineEvents() {
    var $wrapper = $('#cd-timeline');
    $wrapper.find('.vtimeline-block').sort(function (a, b) {
        date1 = new Date(a.dataset.id);
        date2 = new Date(b.dataset.id);
        return +date2 - +date1;
    })
        .appendTo( $wrapper );

    $('#cd-timeline').on('click', 'a', function (event) {
        event.not(".see-more-link").preventDefault();

        $('html, body').animate({
            scrollTop: $(event.target).offset().top
        }, 500);
    });
}

/**
 * bind event listeners to 'window'
 */
function bindWindowEvents() {
    //Check to see if the window is top if not then display button
    $(window).scroll(function () {
        if ($(this).scrollTop() > 100) {
            $('.scroll-to-top').fadeIn();
        } else {
            $('.scroll-to-top').fadeOut();
        }
    });
}

/**
 * bind event listeners to '.scroll-to-top'
 */
function bindScrollEvents() {
    //Click event to scroll to top
    $('.scroll-to-top').click(function () {
        $('html, body').animate({scrollTop: 0}, 600);
        return false;
    });
}

/**
 * return an array of all the unchecked filters
 * @returns {Array}
 */
function getFilterState() {
    var hiddenTypes = [];
    $('#toggle-block').children('span').each(function() {
        if (!($(this).children("input[type='checkbox']:first").is(":checked")
            )) {
            var type = $(this).children("input[type='checkbox']:first").attr('id');
            type = type.split('-')[0];
            hiddenTypes.push(type);
        }
    });

    return hiddenTypes;
}


/**
 * sort the events by date oldest to newest
 * @param events - array of Event1 objects
 * @returns {*} - array of sorted Event1 objects
 */
function sortEvents(events) {
    events.sort(function(a, b) {
        return a.date - b.date;
    });
    return events;
}
