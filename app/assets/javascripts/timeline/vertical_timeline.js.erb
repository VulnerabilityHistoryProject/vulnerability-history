function deleteVerticalTimeline() {
  $(".cd-timeline-block").remove();
}

function generateVerticalTimeline() {
  /**
   * Timeline generation script
   * @type {DocumentFragment} Stores timeline elements before adding to the HTML page
   */
  var toAdd = document.createDocumentFragment();
  deleteVerticalTimeline();
  d3.csv('<%= ENV["RAILS_RELATIVE_URL_ROOT"] %>/MOCK_DATA_500LINES_ONEYEAR.csv', function (error, bins) {
    if (error) throw error;
    bins = filterData(bins);
    bins.forEach(function (bin) {

      var newDiv = document.createElement('div');
      newDiv.id = bin.name;

      newDiv.className = 'cd-timeline-block';
      newDiv.innerHTML = $('#hiddenArea').html();

      newDiv.innerHTML = newDiv.innerHTML.replace("$TIMESTAMP$", bin.jsonDate);
      newDiv.innerHTML = newDiv.innerHTML.replace("$DESCRIPTION$", bin.description);
      newDiv.innerHTML = newDiv.innerHTML.replace("$TITLE$", bin.name);
      newDiv.innerHTML = newDiv.innerHTML.replace("$NAME$", bin.name);
      newDiv.innerHTML = newDiv.innerHTML.replace("<%=image_path('timeline/cd-icon-default.svg') %>", function () {
        return getCssURL(bin.vType)[0];
      });
      newDiv.innerHTML = newDiv.innerHTML.replace("$HREFURL$", '');
      newDiv.innerHTML = newDiv.innerHTML.replace("cd-default", function () {
        return getCssURL(bin.vType)[1];
      });
      toAdd.appendChild(newDiv);
    });


    document.getElementById('cd-timeline').appendChild(toAdd);

  });
}