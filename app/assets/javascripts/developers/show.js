$(document).ready( function() {
    $.ajax({
        url: "/api/commits?developer_id=" + $('#developer_id').text(),
        dataType: 'json',
        success: function(jsonData) {
            $('#datatable').dataTable({
                data: jsonData,
                columns: [
                  { title: 'ID', data: 'id', defaultContent: 'Null'},
                  { title: 'Commit Hash', data: 'commit_hash', defaultContent: 'Null'},
                  { title: 'Author ID', data: 'author_id', defaultContent: 'Null'},
                  { title: 'Date Created', data: 'date_created', defaultContent: 'Null',
                    render: function(data) {
                      return moment(data).format('MMMM Do YYYY, h:mm a');
                    }
                  }
                ]
            });
        }
    });

    //moment(event.date).format('MMMM Do YYYY, h:mm a')

    $('#datatable').on('mouseover', 'tbody tr', function() {
        $(this).css({
           'cursor': 'pointer',
            'color': 'blue'
        });
    })

    $('#datatable').on('mouseout', 'tbody tr', function() {
        $(this).css({
            'cursor': 'default',
            'color': 'inherit'
        });
    })

    $('#datatable').on( 'click', 'tbody tr', function() {
        var url = "/commits/";
        if (url.slice(-1) == "/"){
          url += $(this).children(':first').text();
        } else {
          url += '/' + $(this).children(':first').text();
        }
        window.location.assign(url);
    });
});
