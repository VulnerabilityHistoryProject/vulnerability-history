$( document ).ready( function() {
    $.ajax({
        url: "/api/tags",
        dataType: 'json',
        success: function (jsonData) {
            $('#datatable').dataTable({
                responsive: true,
                destroy: true,
                data: jsonData,
                pageLength: 50,
                rowCallback: function(row, data, index){
                    $(row).on('click', function(){
                        var url = '/tags/' + data.id;
                        window.location.assign(url);
                    })
                },
                columns: [
                    {
                        title: '<i class="fi-pricetag-multiple"></i> Tag',
                        data: null,
                        defaultContent: '',
                        responsivePriority: 1,
                        render: function(data) {
                            icon = '<i class="fi-pricetag-multiple" style="color: ' + data.color + '"></i> '
                            return  icon + data.name;
                        }
                    },
                    {
                        title: 'Description',
                        responsivePriority: 2,
                        data: 'short_desc',
                        defaultContent: ''
                    }
                ],
                initComplete: function () {
                    $('#loading').remove();
                  }
            });
        }
    });
        $('#datatable').on('mouseover', 'tbody tr', function() {
            $(this).css({
                'cursor': 'pointer',
                'color': 'blue'
            });
        })

        $('#datatable').on('mouseout', 'tbody tr', function() {
            $(this).css({
                'cursor': 'default',
                'color': 'inherit'
            });
        })
});
