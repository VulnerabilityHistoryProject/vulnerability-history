$( document ).ready( function() {
    $.ajax({
        url: "/api/tags",
        dataType: 'json',
        success: function (jsonData) {
            $('#datatable').dataTable({
                destroy: true,
                data: jsonData,
                rowCallback: function(row, data, index){
                    $(row).on('click', function(){
                        var url = '/tags/' + data.id;
                        window.location.assign(url);
                    })
                },
                columns: [
                    {title: 'Tag', data: 'name', defaultContent: ''},
                    {title: 'Number of vulnerabilities', data: '', defaultContent: 'need to decide how to do counts'} //change this to be a calculated count hopefully
                ],
                initComplete: function () {
                    $('#loading').remove();
                  }
            });
        }
    });
        $('#datatable').on('mouseover', 'tbody tr', function() {
            $(this).css({
                'cursor': 'pointer',
                'color': 'blue'
            });
        })

        $('#datatable').on('mouseout', 'tbody tr', function() {
            $(this).css({
                'cursor': 'default',
                'color': 'inherit'
            });
        })
});
