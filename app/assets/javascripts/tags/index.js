$(document).ready( function() {
    $('#datatable').empty();
    $.ajax({
        url: "/api/tags",
        dataType: 'json',
        success: function (jsonData) {
            $('#datatable').dataTable({
                data: jsonData,
                columns: [
                    {title: 'ID', data: 'id', defaultContent: 'Null'},
                    {title: 'Tag', data: 'name', defaultContent: 'Null'},
                    {title: 'Number of vulnerabilities', data: 'id', defaultContent: 'Null'} //change this to be a calculated count hopefully
                ]
            });
        }
    });
        $('#datatable').on('mouseover', 'tbody tr', function() {
            $(this).css({
                'cursor': 'pointer',
                'color': 'blue'
            });
        })

        $('#datatable').on('mouseout', 'tbody tr', function() {
            $(this).css({
                'cursor': 'default',
                'color': 'inherit'
            });
        })

        $('#datatable').on( 'click', 'tbody tr', function() {
            var url = window.location.href;
            url += '/' + $(this).children(':first').text();
            window.location.assign(url);
        });
}
);