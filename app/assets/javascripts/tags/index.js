$( document ).ready( function() {
    $.ajax({
        url: "/api/tags",
        dataType: 'json',
        success: function (jsonData) {
            $('#datatable').dataTable({
                responsive: true,
                destroy: true,
                data: jsonData,
                pageLength: 50,
                columns: [
                    {
                        title: '<i class="fi-pricetag-multiple"></i> Tag',
                        data: null,
                        defaultContent: '',
                        responsivePriority: 1,
                        render: function(data, type, row) {
                            icon = '<i class="fi-pricetag-multiple" style="color: ' + data.color + '"></i> '
                            return renderAsLink(icon + data.name, row)
                        }
                    },
                    {
                        title: 'Description',
                        responsivePriority: 2,
                        data: 'short_desc',
                        defaultContent: '',
                        render: (data, type, row) => renderAsLink(data, row)
                    }
                ],
                initComplete: function () {
                    $('#loading').remove();
                  }
            });
        }
    });
        $('#datatable').on('mouseover', 'tbody tr', function() {
            $(this).css({
                'cursor': 'pointer',
                'color': 'blue'
            });
        })

        $('#datatable').on('mouseout', 'tbody tr', function() {
            $(this).css({
                'cursor': 'default',
                'color': 'inherit'
            });
        })
});

function renderAsLink(data, row) {
    return '<a class="dt_row" href="/tags/' + row.id + '">' + data + '</a>';
}