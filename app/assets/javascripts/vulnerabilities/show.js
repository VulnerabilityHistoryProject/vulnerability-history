$( document ).ready( function() {
    window.filters = [];
    var eArray = collectEvents();
    var sEvents = sortEvents(eArray);
    var impDates = getImportantDates(sEvents);
    var minDate = impDates.minDate;
    var maxDate = impDates.maxDate;
    var eVcc = impDates.eVcc;
    var eVuln = impDates.eVuln;
    var lFix = impDates.lFix;

    var margin = {top: 10, right: 60, bottom: 45, left: 60};
    var width = 960 - margin.left - margin.right;
    var height = 270 - margin.top - margin.bottom;

    var minChicHeight = 10;
    var maxChicHeight = 15;
    var chicWidth = 20;
    var cLowerLim = 15;
    var cUpperLim = 25;
    var zoom = false;
    var hiddenTypes = [];

    var h = new HorizontalTimeline(
        sEvents,
        cLowerLim,
        cUpperLim,
        minChicHeight,
        maxChicHeight,
        chicWidth,
        zoom,
        minDate,
        maxDate,
        eVcc,
        eVuln,
        lFix,
        height,
        width,
        margin,
        hiddenTypes
    );

    h.setup();
    h.generate();

    bindDataToggleCallback(h, sEvents, cLowerLim, cUpperLim, minChicHeight, maxChicHeight, chicWidth, zoom,
        minDate, maxDate, eVcc, eVuln, lFix, height, width, margin);
    bindCdTimelineEvents();
    bindWindowEvents();
    bindScrollEvents();
    bindZoomEvents(h, sEvents, cLowerLim, cUpperLim, minChicHeight, maxChicHeight, chicWidth, minDate, maxDate,
        eVcc, eVuln, lFix, height, width, margin);
});
