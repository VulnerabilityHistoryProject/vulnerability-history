$(document).ready( function() {
    $.ajax({
        url: "/api/vulnerabilities",
        dataType: 'json',
        success: function(jsonData) {
            $('#datatable').dataTable({
                data: jsonData,
                columns: [
                    { title: 'ID', data: 'id', defaultContent: 'Null'},
                    { title: 'CVE', data: 'cve', defaultContent: 'Null'},
                    { title: 'Announced', data: 'announced', defaultContent: 'Null'},
                    { title: 'Description', data: 'description', defaultContent: 'Null'}
                ]
            });
        }
    });

    $('#datatable').on( 'click', 'tbody tr', function () {
        var url = window.location.href;
        url += '/' + $(this).children(':first').text();
        window.location.assign(url);
    });
});
