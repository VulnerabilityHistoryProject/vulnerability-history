require 'coderay'
require 'yaml'
require 'kramdown'
require 'rinku'
require 'sanitize'

module ApplicationHelper
  def markdown(source)
    scrubbed = Sanitize.fragment(source)
    markdownified = Kramdown::Document.new(scrubbed).to_html.html_safe
    html = Rinku.auto_link(markdownified, mode=:all, link_attr=nil, skip_tags=nil)
    raw(html)
  end

  def pretty_code(str)
    CodeRay.scan(str.to_yaml, :yaml).div(:line_numbers => :table)
  end

  def pretty_date(source)
    source.strftime('%a %d %b %Y')
  end
end
